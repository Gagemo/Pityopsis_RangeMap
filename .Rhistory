radius = 3.5, fill = TRUE, fillColor = "#984EA3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.gholsonii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FF7F00", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.laevigata_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFFF33", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.ohlingerae_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A65628", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.patens_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#F781BF", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.pauciflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#999999", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.provincialis_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#66C2A5", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.quadriflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FC8D62", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.secunda_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E78AC3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.squarrulosa_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A6D854", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.tenuifolia_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFD92F", opacity = 1,
fillOpacity = 1, color = "black") %>%
addLayersControl(
overlayGroups = inat_L.tenuifolia_pcsp_popup_sf,
options = layersControlOptions(position = "bottomright", collapsed = TRUE)
)
Liatris
Liatris = leaflet(FL_sf, options = leafletOptions(zoomControl = FALSE)) %>%
addProviderTiles("GeoportailFrance.orthos") %>%
addPolygons(fill = TRUE, fillColor = "forestgreen", color = "black",
weight = 1, fillOpacity = 0.4) %>%
# Adding Liatris species
addCircleMarkers(data = inat_L.aspera_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E41A1C", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.chapmanii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#377EB8", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.elegantula_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#4DAF4A", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.garberi_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#984EA3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.gholsonii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FF7F00", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.laevigata_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFFF33", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.ohlingerae_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A65628", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.patens_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#F781BF", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.pauciflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#999999", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.provincialis_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#66C2A5", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.quadriflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FC8D62", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.secunda_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E78AC3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.squarrulosa_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A6D854", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.tenuifolia_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFD92F", opacity = 1,
fillOpacity = 1, color = "black") %>%
addLayersControl(
baseGroups  = layer_groups,
options = layersControlOptions(position = "bottomright", collapsed = TRUE)
)
Liatris
Liatris = leaflet(FL_sf, options = leafletOptions(zoomControl = FALSE)) %>%
addProviderTiles("GeoportailFrance.orthos") %>%
addPolygons(fill = TRUE, fillColor = "forestgreen", color = "black",
weight = 1, fillOpacity = 0.4) %>%
# Adding Liatris species
addCircleMarkers(data = inat_L.aspera_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E41A1C", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.chapmanii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#377EB8", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.elegantula_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#4DAF4A", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.garberi_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#984EA3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.gholsonii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FF7F00", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.laevigata_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFFF33", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.ohlingerae_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A65628", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.patens_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#F781BF", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.pauciflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#999999", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.provincialis_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#66C2A5", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.quadriflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FC8D62", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.secunda_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E78AC3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.squarrulosa_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A6D854", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.tenuifolia_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFD92F", opacity = 1,
fillOpacity = 1, color = "black") %>%
addLayersControl(
overlayGroups = layer_groups,
options = layersControlOptions(position = "bottomright", collapsed = TRUE)
)
Liatris
Liatris = leaflet(FL_sf, options = leafletOptions(zoomControl = FALSE)) %>%
addProviderTiles("GeoportailFrance.orthos") %>%
addPolygons(fill = TRUE, fillColor = "forestgreen", color = "black",
weight = 1, fillOpacity = 0.4) %>%
# Adding Liatris species
addCircleMarkers(data = inat_L.aspera_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E41A1C", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.chapmanii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#377EB8", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.elegantula_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#4DAF4A", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.garberi_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#984EA3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.gholsonii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FF7F00", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.laevigata_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFFF33", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.ohlingerae_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A65628", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.patens_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#F781BF", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.pauciflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#999999", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.provincialis_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#66C2A5", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.quadriflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FC8D62", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.secunda_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E78AC3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.squarrulosa_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A6D854", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.tenuifolia_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFD92F", opacity = 1,
fillOpacity = 1, color = "black") %>%
addLayersControl(
overlayGroups = c(paste0(species_list, "Observations")),
options = layersControlOptions(position = "bottomright", collapsed = TRUE)
)
Liatris
species_list <- c("L.aspera", "L.chapmanii", "L.elegantula", "L.garberi",
"L.gholsonii", "L.laevigata", "L.ohlingerae", "L.patens",
"L.pauciflora", "L.provincialis", "L.quadriflora",
"L.resinosa", "L.secunda", "L.squarrulosa", "L.tenuifolia")
# Update the map with the dynamic layer control and legend
Liatris <- Liatris %>%
addLayersControl(
overlayGroups = c(range_groups, observation_groups),
options = layersControlOptions(collapsed = FALSE)
) %>%
addLegend(opacity = 1, position = 'bottomleft',
colors = species_colors[species_list],
labels = legend_labels,
title = "Liatris Species Ranges")
Liatris = leaflet(FL_sf, options = leafletOptions(zoomControl = FALSE)) %>%
addProviderTiles("GeoportailFrance.orthos") %>%
addPolygons(fill = TRUE, fillColor = "forestgreen", color = "black",
weight = 1, fillOpacity = 0.4) %>%
# Adding Liatris species
addCircleMarkers(data = inat_L.aspera_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E41A1C", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.chapmanii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#377EB8", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.elegantula_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#4DAF4A", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.garberi_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#984EA3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.gholsonii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FF7F00", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.laevigata_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFFF33", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.ohlingerae_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A65628", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.patens_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#F781BF", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.pauciflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#999999", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.provincialis_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#66C2A5", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.quadriflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FC8D62", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.secunda_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E78AC3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.squarrulosa_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A6D854", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.tenuifolia_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFD92F", opacity = 1,
fillOpacity = 1, color = "black") %>%
addLayersControl(
overlayGroups = c(paste0(species_list, "Observations")),
options = layersControlOptions(position = "bottomright", collapsed = TRUE)
)
Liatris
rm(list=ls(all=TRUE))
cat("\014")
list.of.packages <- c("tidyverse", "sp", "rgdal", "rgdal", "rgeos", "raster",
"rgbif", "tmap", "rinat", "leaflet", "conflicted", "sf",
"rangemap", "mapview", "htmlwidgets")
new.packages <- list.of.packages[!(list.of.packages %in%
installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
library(tidyverse)
library(sp)
library(rgdal)
library(rgeos)
library(raster)
library(tmap)
library(rinat)
library(leaflet)
library(conflicted)
library(sf)
library(rgbif)
library(mapview)
library(htmlwidgets)
conflict_prefer("filter", "dplyr", quiet = TRUE)
conflict_prefer("count", "dplyr", quiet = TRUE)
conflict_prefer("select", "dplyr", quiet = TRUE)
conflict_prefer("arrange", "dplyr", quiet = TRUE)
FL_sf <- st_read("geojson-fl-counties-fips.json", quiet = TRUE) %>%
st_transform(4326)
FL_bb <- FL_sf %>%
st_bbox()
species_list <- c("L.aspera", "L.chapmanii", "L.elegantula", "L.garberi",
"L.gholsonii", "L.laevigata", "L.ohlingerae", "L.patens",
"L.pauciflora", "L.provincialis", "L.quadriflora",
"L.resinosa", "L.secunda", "L.squarrulosa", "L.tenuifolia")
for (species in species_list) {
# Construct dynamic file name
search_fn <- paste0(species, "_FL.Rdata")
# Check if file exists
if (file.exists(search_fn)) {
load(search_fn)
} else {
# Construct dynamic taxon name
taxon_name <- paste0("Liatris", species)
# Get iNaturalist observations
inat_df_name <- paste0("inat_", species, "_df")
assign(inat_df_name, get_inat_obs(bounds = FL_bb[c(2,1,4,3)],
taxon_name = taxon_name,
year = NULL,
month = NULL,
quality_grade = "research",
maxresults = 1000))
# Save the data
save(list = inat_df_name, file = search_fn)
}
}
for (species in species_list) {
# Construct dynamic data frame names
inat_df_name <- paste0("inat_", species, "_df")
pcsp_popup_sf_name <- paste0("inat_", species, "_pcsp_popup_sf")
# Apply the operations
assign(pcsp_popup_sf_name,
get(inat_df_name) %>%
select(longitude, latitude, datetime, common_name, scientific_name, image_url, user_login) %>%
st_as_sf(coords = c("longitude", "latitude"), crs = 4326) %>%
st_intersection(FL_sf) %>%
mutate(popup_html = paste0("<p><b>", common_name, "</b><br/>",
"<i>", scientific_name, "</i></p>",
"<p>Observed: ", datetime, "<br/>",
"User: ", user_login, "</p>",
"<p><img src='", image_url,
"' style='width:100%;'/></p>"))
)
}
htmltools::p("Native Liatris in Florida",
style = "font-weight:bold; font-size:110%;")
Liatris = leaflet(FL_sf, options = leafletOptions(zoomControl = FALSE)) %>%
addProviderTiles("GeoportailFrance.orthos") %>%
addPolygons(fill = TRUE, fillColor = "forestgreen", color = "black",
weight = 1, fillOpacity = 0.4) %>%
# Adding Liatris species
addCircleMarkers(data = inat_L.aspera_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E41A1C", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.chapmanii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#377EB8", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.elegantula_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#4DAF4A", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.garberi_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#984EA3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.gholsonii_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FF7F00", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.laevigata_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFFF33", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.ohlingerae_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A65628", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.patens_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#F781BF", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.pauciflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#999999", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.provincialis_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#66C2A5", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.quadriflora_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FC8D62", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.secunda_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#E78AC3", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.squarrulosa_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#A6D854", opacity = 1,
fillOpacity = 1, color = "black") %>%
addCircleMarkers(data = inat_L.tenuifolia_pcsp_popup_sf,
popup = ~popup_html, weight = 1,
radius = 3.5, fill = TRUE, fillColor = "#FFD92F", opacity = 1,
fillOpacity = 1, color = "black") %>%
addLayersControl(
overlayGroups = c(paste0(species_list, "Observations")),
options = layersControlOptions(position = "bottomright", collapsed = TRUE)
)
Liatris
############################# Creates Map  #####################################
# Assign colors for species
species_colors <- c(
"L. aspera" = "#E41A1C",
"L. chapmanii" = "#377EB8",
"L. elegantula" = "#4DAF4A",
"L. garberi" = "#984EA3",
"L. gholsonii" = "#FF7F00",
"L. laevigata" = "#FFFF33",
"L. ohlingerae" = "#A65628",
"L. patens" = "#F781BF",
"L. pauciflora" = "#999999",
"L. provincialis" = "#B3DE69",
"L. quadriflora" = "#CCEBC5",
"L. resinosa" = "#DBDBDB",
"L. secunda" = "#9EDAE5",
"L. squarrulosa" = "#666666",
"L. tenuifolia" = "#1B9E77"
)
htmltools::p("Native Liatris in Florida",
style = "font-weight:bold; font-size:110%;")
# Initialize a Leaflet map
Liatris_map <- leaflet() %>%
addTiles()  # Add a basemap layer
# Initialize a Leaflet map
Liatris_map <- leaflet() %>%
addTiles()  # Add a basemap layer
# Loop through the species list
for (species in species_list) {
# Construct dynamic variable names
inat_sf_name <- paste0("inat_", species, "_pcsp_popup_sf")
# Extract the dynamic objects
inat_sf <- get(inat_sf_name)
# Add species observation points to the map
Liatris_map <- Liatris_map %>%
addCircleMarkers(
data = inat_sf,
radius = 4,
color = species_colors[species],
fillColor = species_colors[species],
fillOpacity = 1,
popup = ~popup_html,  # Use pre-created popup HTML
group = paste0(species, " Observations")
)
}
Liatris
Liatris_map
